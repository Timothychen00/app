{% extends 'base.html' %}
{% block main_content %}
<div class="container">
    <div class='row justify-content-center'>
        <div class='col-12 ustify-content-center {% if session['current_user']['authority']=='normal'%} col-md-6{%else%} col-md-10{%endif%}'>
            <div class='h1 text-center mt-5'>個人資料</div>
            <form method='POST' class='ps-5 offset-1' action='/userspace/edit/' novalidate>
                {{form.csrf_token()}}
                <table class='mt-3 ps-5 fw-normal table text-start' style='font-size:1.25rem!important;'>
                    <tr class='pb-5'>
                        {% if session['current_user']['authority'] in ['staff','admin'] %}<td>員工編號：{{session['current_user']['staff_id']}}</td>{% endif %}
                        <td>帳號：{{session['current_user']['account']}}</td>
                    </tr>
                    <tr>
                        {% if session['current_user']['authority'] in ['staff','admin'] %}
                            <td>部門代號：{{session['current_user']['class_id']}} {{session['current_user']['class']}}</td>
                        {% endif %}
                            <td>真實姓名：  {{form.name(value=session['current_user']['name'])}}
                                {% if form.name.errors %}
                                    <ul class='wrong-feedback'>
                                    {%for error in form.name.errors%}
                                        <li>{{error}}</li>
                                    {%endfor%}
                                    </ul>
                                {% endif %}
                            </td>
                        </tr>
                    <tr>
                        <td>電子信箱：{{form.email(value=session['current_user']['email'])}}
                            {% if form.email.errors %}
                                <ul class='wrong-feedback'>
                                {%for error in form.email.errors%}
                                    <li>{{error}}</li>
                                {%endfor%}
                                </ul>
                            {% endif %}
                        </td>
                        {% if session['current_user']['authority'] in ['staff','admin'] %}
                            <td>層級代號：{{session['current_user']['layer_id']}} {{session['current_user']['layer']}}</td>
                        {%endif%}
                        </tr>
                    <tr>
                        <td>手機號碼：{{form.phone(value=session['current_user']['phone'])}}
                            {% if form.phone.errors %}
                                <ul class='wrong-feedback'>
                                {%for error in form.phone.errors%}
                                    <li>{{error}}</li>
                                {%endfor%}
                                </ul>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                    {% if session['current_user']['authority'] in ['staff','admin'] %}
                        <td>職稱：{{session['current_user']['job']}}</td>
                    {%endif%}
                    </tr>
                    <tr>
                        <td>出生日期：{{form.birth(value=session['current_user']['birth'])}}
                            </br><span style='font-size:1rem!important;'>格式(西元)：YYYY-MM-DD</span>
                            {% if form.birth.errors %}
                                <ul class='wrong-feedback'>
                                {%for error in form.birth.errors%}
                                    <li>{{error}}</li>
                                {%endfor%}
                                </ul>
                            {% endif %}
                        </td>
                    </tr>
                </table>
                {{form.submit(class_='btn btn-custom')}}<button onlick='javascript:location.href='/userspace/edit/password/'' class='btn ms-3'>修改密碼</button>
            </form>
        </div>
    </div>
</div>
{% endblock main_content %}